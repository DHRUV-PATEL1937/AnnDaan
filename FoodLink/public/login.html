<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FoodLink - Login</title>
    <meta name="description" content="Login to FoodLink to donate food and help those in need." />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <style>
    :root {
      --brand: #2e7d64;
      --text: #1b2b22;
      --muted: #5d6b61;
      --accent-2: #ecf3ef;
      --bg: #f7faf7;
      --shadow-1: 0 2px 10px rgba(0,0,0,0.05);
      --shadow-2: 0 8px 30px rgba(21,41,32,.1);
      --ring: 0 0 0 3px rgba(46,125,100,.3);
      --radius-sm: 12px;
      --grad: linear-gradient(135deg, #2e7d64, #7cc4a1);
      --pill: linear-gradient(180deg,#ffffff,#eef3ef);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family:"Inter", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      line-height:1.5;
    }
    
    /* ---------- Utilities ---------- */
    .container{max-width:1200px;margin:0 auto;padding:0 24px}
    .container-wide{max-width:1280px;margin:0 auto;padding:0 24px}
    .grid{display:grid;gap:24px}
    .center{text-align:center}
    .btn{
      --pad:14px 22px;
      display:inline-flex;align-items:center;justify-content:center;gap:10px;
      padding:var(--pad);
      border-radius:999px;border:0;cursor:pointer;text-decoration:none;
      color:#fff;background:var(--grad);font-weight:700;
      box-shadow:var(--shadow-2);
      transition:transform .18s ease, box-shadow .25s ease, filter .25s ease;
    }
    .btn:hover{transform:translateY(-2px);filter:brightness(1.05)}
    .btn:active{transform:translateY(0)}
    .btn.ghost{
      color:var(--brand);background:transparent;border:1.5px solid rgba(46,125,100,.25);box-shadow:none
    }
    
    /* ---------- Decorative Dots / Shapes ---------- */
    .shape{
      position:absolute;border-radius:50%;filter:blur(30px);opacity:.25;pointer-events:none
    }
    .shape.a{width:240px;height:240px;background:#bfe7d1;left:-60px;top:-60px}
    .shape.b{width:300px;height:300px;background:#dcefe6;right:-40px;top:-80px}

    /* Styles for Role Selection in Modal */
    .role-selection {
        margin-bottom: 24px;
    }
    .role-selection p {
        font-weight: 500;
        color: var(--muted);
        margin-bottom: 12px;
        text-align: center;
    }
    .role-options {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
    }
    .role-option {
        position: relative;
    }
    .role-option input[type="radio"] {
        position: absolute;
        opacity: 0;
        width: 0;
        height: 0;
    }
    .role-option label {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 15px 10px;
        border: 2px solid #dee2e6;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: center;
    }
    .role-option label i {
        font-size: 24px;
        color: var(--muted);
        margin-bottom: 8px;
        transition: color 0.3s ease;
    }
    .role-option label span {
        font-weight: 600;
        color: var(--muted);
        transition: color 0.3s ease;
    }
    .role-option input[type="radio"]:checked + label {
        border-color: var(--brand);
        background-color: #f0fdfa;
    }
    .role-option input[type="radio"]:checked + label i,
    .role-option input[type="radio"]:checked + label span {
        color: var(--brand);
    }
    </style>
    <link rel="stylesheet" href="login.css">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>

    <body>
        <!-- Decorative shapes -->
        <div class="shape a"></div>
        <div class="shape b"></div>

        <nav style="background: white; padding: 1rem; box-shadow: var(--shadow-1); text-align: center; margin-bottom: 2rem;">
            <a href="dashboard.html" style="font-size: 1.5rem; font-weight: 700; color: var(--brand); text-decoration: none;">FoodLink Home</a>
        </nav>

        <div class="login-container">
            <div class="login-card">
                <div class="login-header">
                    <h2>Login</h2>
                    <p>Please sign in to continue</p>
                </div>

                <form class="login-form" id="loginForm" novalidate>
                    <div class="form-group">
                        <div class="input-group neu-input">
                            <input type="email" id="email" name="email" required autocomplete="email" placeholder=" ">
                            <label for="email">Email</label>
                        </div>
                        <span class="error-message" id="emailError"></span>
                    </div>

                    <div class="form-group">
                        <div class="input-group neu-input password-group">
                            <input type="password" id="password" name="password" required
                                autocomplete="current-password" placeholder=" ">
                            <label for="password">Password</label>
                            <button type="button" class="password-toggle neu-toggle" id="passwordToggle"
                                aria-label="Toggle password visibility">
                                <svg class="eye-open" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                                    <circle cx="12" cy="12" r="3" />
                                </svg>
                                <svg class="eye-closed" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path
                                        d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24" />
                                    <line x1="1" y1="1" x2="23" y2="23" />
                                </svg>
                            </button>
                        </div>
                        <span class="error-message" id="passwordError"></span>
                    </div>

                    <button type="submit" class="btn login-btn">
                        <span class="btn-text">Sign In</span>
                        <div class="btn-loader">
                            <div class="neu-spinner"></div>
                        </div>
                    </button>
                </form>
                
                <div class="divider">
                    <span>OR</span>
                </div>
                
                <div class="google-signin">
                    <div id="g_id_onload"
                        data-client_id="780636743153-a2siktoq6eqke80a6kehi31ffiacn5kv.apps.googleusercontent.com"
                        data-context="signin"
                        data-ux_mode="popup"
                        data-callback="handleCredentialResponse"
                        data-auto_prompt="false">
                    </div>
                    
                    <div class="g_id_signin"
                         data-type="standard"
                         data-shape="rectangular"
                         data-theme="outline"
                         data-text="signin_with"
                         data-size="large"
                         data-logo_alignment="center"
                         data-width="300">
                    </div>
                </div>

                <div class="signup-link">
                    <p>Don't have an account? <a href="signup.html">Sign up</a></p>
                </div>

                <div class="success-message" id="successMessage">
                    <div class="success-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="20 6 9 17 4 12"></polyline>
                        </svg>
                    </div>
                    <h3>Login Successful!</h3>
                    <p>Hold on, redirecting you to your dashboard...</p>
                    <div class="redirect-loader"></div>
                </div>
            </div>
        </div>

        <!-- ⭐ UPDATED: Modal for Username and Role Input -->
        <div class="modal-overlay" id="usernameModal" style="display: none;">
            <div class="modal-content">
                <h3>Complete Your Profile</h3>
                <p>Choose a unique username and your role to finish signing up.</p>
                <form id="usernameForm">
                    <!-- ⭐ ROLE SELECTION ADDED TO MODAL -->
                    <div class="role-selection">
                        <p>I am signing up as a:</p>
                        <div class="role-options">
                            <div class="role-option">
                                <input type="radio" id="modal-role-user" name="modal-role" value="user" checked>
                                <label for="modal-role-user">
                                    <i class="fas fa-user"></i>
                                    <span>User</span>
                                </label>
                            </div>
                            <div class="role-option">
                                <input type="radio" id="modal-role-ngo" name="modal-role" value="ngo">
                                <label for="modal-role-ngo">
                                    <i class="fas fa-hands-helping"></i>
                                    <span>NGO</span>
                                </label>
                            </div>
                            <div class="role-option">
                                <input type="radio" id="modal-role-rider" name="modal-role" value="rider">
                                <label for="modal-role-rider">
                                    <i class="fas fa-motorcycle"></i>
                                    <span>Rider</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="input-group neu-input">
                            <input type="text" id="modalUsername" name="modalUsername" required autocomplete="username" placeholder=" ">
                            <label for="modalUsername">Username</label>
                        </div>
                        <span class="error-message" id="modalUsernameError"></span>
                    </div>
                    <button type="submit" class="btn">Complete Signup</button>
                </form>
            </div>
        </div>


        <script src="login.js"></script>
    </body>

</html>
